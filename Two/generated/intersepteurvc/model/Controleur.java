//
// THIS FILE IS AUTOMATICALLY GENERATED!!
//
// Generated at 2021-12-01 by the VDM++ to JAVA Code Generator
// (v9.0.7 - Sat 09-Jun-2018 10:11:21 +0900)
//
// ***** VDMTOOLS START Name=HeaderComment KEEP=NO
// ***** VDMTOOLS END Name=HeaderComment

// This file was genereted from "C:\\Users\\nmari\\GL_PROJET_M1_S7\\Two\\Controleur.vdmpp".

// ***** VDMTOOLS START Name=package KEEP=NO
package intersepteurvc.model;
// ***** VDMTOOLS END Name=package

// ***** VDMTOOLS START Name=imports KEEP=NO
import java.util.Map;
import java.util.Set;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import jp.vdmtools.VDM.UTIL;
import jp.vdmtools.VDM.Tuple;
import jp.vdmtools.VDM.CGException;
// ***** VDMTOOLS END Name=imports



public class Controleur {

// ***** VDMTOOLS START Name=periode KEEP=NO
  protected Number periode = null;
// ***** VDMTOOLS END Name=periode

// ***** VDMTOOLS START Name=estPeriodique KEEP=NO
  protected Boolean estPeriodique = null;
// ***** VDMTOOLS END Name=estPeriodique

// ***** VDMTOOLS START Name=Fini KEEP=NO
  private Boolean Fini = null;
// ***** VDMTOOLS END Name=Fini

// ***** VDMTOOLS START Name=ListeActeur KEEP=NO
  private Map ListeActeur = new HashMap();
// ***** VDMTOOLS END Name=ListeActeur

// ***** VDMTOOLS START Name=ListeMenace KEEP=NO
  private Map ListeMenace = new HashMap();
// ***** VDMTOOLS END Name=ListeMenace

// ***** VDMTOOLS START Name=ListeLongitude KEEP=NO
  private Map ListeLongitude = new HashMap();
// ***** VDMTOOLS END Name=ListeLongitude

// ***** VDMTOOLS START Name=ListeLatitude KEEP=NO
  private Map ListeLatitude = new HashMap();
// ***** VDMTOOLS END Name=ListeLatitude

// ***** VDMTOOLS START Name=ListeDistance KEEP=NO
  private Map ListeDistance = new HashMap();
// ***** VDMTOOLS END Name=ListeDistance

// ***** VDMTOOLS START Name=ListeMenacesXPositions KEEP=NO
  private Map ListeMenacesXPositions = new HashMap();
// ***** VDMTOOLS END Name=ListeMenacesXPositions

// ***** VDMTOOLS START Name=vdm_init_Controleur KEEP=NO
  private void vdm_init_Controleur () {
    try {
      periode = Long.valueOf(1);
      estPeriodique = Boolean.TRUE;
      Fini = Boolean.FALSE;
      ListeActeur = new HashMap();
      ListeMenace = new HashMap();
      ListeLongitude = new HashMap();
      ListeLatitude = new HashMap();
      ListeDistance = new HashMap();
      ListeMenacesXPositions = new HashMap();
    }
    catch (Exception e) {
      e.printStackTrace(System.out);
      System.out.println(e.getMessage());
    }
  }
// ***** VDMTOOLS END Name=vdm_init_Controleur

// ***** VDMTOOLS START Name=Controleur KEEP=NO
  public Controleur () throws CGException {
    this.vdm_init_Controleur();
  }
// ***** VDMTOOLS END Name=Controleur

// ***** VDMTOOLS START Name=addMenace#1|Map KEEP=NO
  public void addMenace (final Map nouvelleMenace) throws CGException {
    Map rhs_2 = new HashMap(ListeMenace);
    rhs_2.putAll(nouvelleMenace);
    ListeMenace = (Map)UTIL.clone(rhs_2);
  }
// ***** VDMTOOLS END Name=addMenace#1|Map

// ***** VDMTOOLS START Name=RmMenace#1|Number KEEP=NO
  public void RmMenace (final Number id) throws CGException {
    Set var1_3 = new HashSet();
    var1_3.add(id);
    Map tmpMap_6 = new HashMap();
    Set domM_7 = new HashSet(ListeMenace.keySet());
    Set tmpSet_10 = new HashSet(domM_7);
    for (Iterator enm_9 = tmpSet_10.iterator(); enm_9.hasNext(); ) {
      final Object elm_8 = (Object)enm_9.next();
      if (!UTIL.Contains(var1_3, elm_8)) 
        tmpMap_6.put(elm_8, ListeMenace.get(elm_8));
    }
    ListeMenace = (Map)UTIL.clone(tmpMap_6);
  }
// ***** VDMTOOLS END Name=RmMenace#1|Number

// ***** VDMTOOLS START Name=Controleur#2|Number|Boolean KEEP=NO
  public Controleur (final Number T, final Boolean estPeriodic) throws CGException {
    vdm_init_Controleur();
    periode = UTIL.NumberToLong(UTIL.clone(T));
    estPeriodique = (Boolean)UTIL.clone(estPeriodic);
  }
// ***** VDMTOOLS END Name=Controleur#2|Number|Boolean

// ***** VDMTOOLS START Name=MiseAjour KEEP=NO
  public void MiseAjour () throws CGException {
    ListeLongitude = (Map)UTIL.clone(SystemeRTP.CapteurLongitude1.ReadValeur());
    ListeLatitude = (Map)UTIL.clone(SystemeRTP.CapteurLatitude1.ReadValeur());
    ListeDistance = (Map)UTIL.clone(SystemeRTP.CapteurDistance1.ReadValeur());
    ListeMenacesXPositions = new HashMap();
    Set res_s_7 = new HashSet();
    final Set e1_set_11 = new HashSet(ListeMenace.keySet());
    Set tmpSet_13 = new HashSet(e1_set_11);
    for (Iterator enm_12 = tmpSet_13.iterator(); enm_12.hasNext(); ) {
      final Number td = UTIL.NumberToLong(enm_12.next());
      res_s_7.add(td);
    }
    final Set missile = res_s_7;
    Set tmpSet_34 = new HashSet(missile);
    for (Iterator enm_33 = tmpSet_34.iterator(); enm_33.hasNext(); ) {
      final Number m = UTIL.NumberToLong(enm_33.next());
      Tuple md_18 = new Tuple(2);
      md_18.SetField(1, m);
      md_18.SetField(2, ListeMenace.get(m));
      Tuple mr_23 = new Tuple(3);
      mr_23.SetField(1, UTIL.NumberToLong(ListeDistance.get(m)));
      mr_23.SetField(2, UTIL.NumberToLong(ListeLongitude.get(m)));
      mr_23.SetField(3, UTIL.NumberToLong(ListeLatitude.get(m)));
      ListeMenacesXPositions.put(md_18, mr_23);
    }
  }
// ***** VDMTOOLS END Name=MiseAjour

// ***** VDMTOOLS START Name=Algorithme KEEP=NO
  private void Algorithme () throws CGException {
    ;
  }
// ***** VDMTOOLS END Name=Algorithme

// ***** VDMTOOLS START Name=estFini KEEP=NO
  public void estFini () throws CGException {}
// ***** VDMTOOLS END Name=estFini

// ***** VDMTOOLS START Name=Finir KEEP=NO
  public void Finir () throws CGException {
    Fini = Boolean.TRUE;
  }
// ***** VDMTOOLS END Name=Finir

// ***** VDMTOOLS START Name=Action KEEP=NO
  public void Action () throws CGException {
    MiseAjour();
    Algorithme();
    final Set iset_5 = new HashSet(ListeMenacesXPositions.keySet());
    Set tmpSet_13 = new HashSet(iset_5);
    for (Iterator enm_12 = tmpSet_13.iterator(); enm_12.hasNext(); ) {
      final Tuple m = (Tuple)enm_12.next();
      Tuple par_7 = new Tuple(2);
      par_7.SetField(1, m);
      par_7.SetField(2, (Tuple)ListeMenacesXPositions.get(m));
      SystemeRTP.ControleurDispenseur1.SetEnnemi(par_7);
    }
  }
// ***** VDMTOOLS END Name=Action

}

